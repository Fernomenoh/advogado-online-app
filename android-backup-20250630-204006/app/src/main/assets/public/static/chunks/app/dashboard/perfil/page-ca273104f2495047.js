(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{7791:function(e,a,t){Promise.resolve().then(t.bind(t,9459))},9459:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var s=t(5444),r=t(9300),n=t(5762),i=t(2422),o=t(4678),l=t(4635),d=t(9827),c=t(4693),u=t(5798),f=t(8510),m=t(4559),p=t(8382);let h=(0,t(2154).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var x=t(8082),y=t(8527),v=t(5854);function j(){let{data:e,update:a}=(0,n.useSession)(),[t,j]=(0,r.useState)({name:"",email:"",phone:"",profession:"",currentPassword:"",newPassword:"",confirmPassword:""}),[w,g]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1),{toast:E}=(0,v.pm)();(0,r.useEffect)(()=>{e?.user&&j(a=>({...a,name:e.user.name||"",email:e.user.email||""}))},[e]);let k=e=>{j({...t,[e.target.name]:e.target.value})},A=async e=>{e.preventDefault(),N(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,phone:t.phone,profession:t.profession})});if(!e.ok){let a=await e.json();throw Error(a.error||"Erro ao atualizar perfil")}await a(),E({title:"Perfil atualizado!",description:"Suas informa\xe7\xf5es foram atualizadas com sucesso."})}catch(e){E({title:"Erro ao atualizar perfil",description:e instanceof Error?e.message:"Erro interno do servidor",variant:"destructive"})}finally{N(!1)}},T=async e=>{if(e.preventDefault(),t.newPassword!==t.confirmPassword){E({title:"Senhas n\xe3o coincidem",description:"A nova senha e a confirma\xe7\xe3o devem ser iguais.",variant:"destructive"});return}if(t.newPassword.length<6){E({title:"Senha muito fraca",description:"A nova senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}P(!0);try{let e=await fetch("/api/user/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:t.currentPassword,newPassword:t.newPassword})});if(!e.ok){let a=await e.json();throw Error(a.error||"Erro ao alterar senha")}j(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""})),E({title:"Senha alterada!",description:"Sua senha foi alterada com sucesso."})}catch(e){E({title:"Erro ao alterar senha",description:e instanceof Error?e.message:"Erro interno do servidor",variant:"destructive"})}finally{P(!1)}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Meu Perfil"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie suas informa\xe7\xf5es pessoais e configura\xe7\xf5es de conta"})]}),(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Informa\xe7\xf5es Pessoais"]}),(0,s.jsx)(d.SZ,{children:"Atualize suas informa\xe7\xf5es b\xe1sicas"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"name",children:"Nome Completo"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(o.I,{id:"name",name:"name",type:"text",value:t.name,onChange:k,className:"pl-10",required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"email",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(o.I,{id:"email",name:"email",type:"email",value:t.email,className:"pl-10 bg-gray-50",disabled:!0})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"O email n\xe3o pode ser alterado"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"phone",children:"Telefone"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(o.I,{id:"phone",name:"phone",type:"tel",placeholder:"(11) 99999-9999",value:t.phone,onChange:k,className:"pl-10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"profession",children:"Profiss\xe3o"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,s.jsx)(o.I,{id:"profession",name:"profession",type:"text",placeholder:"Sua profiss\xe3o",value:t.profession,onChange:k,className:"pl-10"})]})]}),(0,s.jsx)(i.z,{type:"submit",disabled:b,className:"w-full",children:b?"Atualizando...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Salvar Altera\xe7\xf5es"]})})]})})]})}),(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"flex items-center",children:"\uD83D\uDD10 Alterar Senha"}),(0,s.jsx)(i.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(!w),children:w?(0,s.jsx)(h,{className:"h-4 w-4"}):(0,s.jsx)(x.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)(d.SZ,{children:"Mantenha sua conta segura alterando sua senha regularmente"})]}),(0,s.jsx)(d.aY,{children:(0,s.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"currentPassword",children:"Senha Atual"}),(0,s.jsx)(o.I,{id:"currentPassword",name:"currentPassword",type:w?"text":"password",placeholder:"Digite sua senha atual",value:t.currentPassword,onChange:k,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"newPassword",children:"Nova Senha"}),(0,s.jsx)(o.I,{id:"newPassword",name:"newPassword",type:w?"text":"password",placeholder:"Digite sua nova senha",value:t.newPassword,onChange:k,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l._,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha"}),(0,s.jsx)(o.I,{id:"confirmPassword",name:"confirmPassword",type:w?"text":"password",placeholder:"Confirme sua nova senha",value:t.confirmPassword,onChange:k,required:!0})]}),(0,s.jsx)(i.z,{type:"submit",disabled:S,className:"w-full",children:S?"Alterando...":"Alterar Senha"})]})})]})}),(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsx)(d.ll,{children:"Informa\xe7\xf5es da Conta"}),(0,s.jsx)(d.SZ,{children:"Detalhes sobre sua conta no sistema"})]}),(0,s.jsxs)(d.aY,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Tipo de Conta:"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e?.user?.role==="ADMIN"?"Administrador":"Usu\xe1rio"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Status da Conta:"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Ativa"})]})]})]})})]})}},2422:function(e,a,t){"use strict";t.d(a,{z:function(){return d}});var s=t(5444),r=t(9300),n=t(223),i=t(2371),o=t(5522);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:a,size:t,asChild:r=!1,...i},d)=>{let c=r?n.g7:"button";return(0,s.jsx)(c,{className:(0,o.cn)(l({variant:a,size:t,className:e})),ref:d,...i})});d.displayName="Button"},9827:function(e,a,t){"use strict";t.d(a,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var s=t(5444),r=t(9300),n=t(5522);let i=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card";let o=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a}));o.displayName="CardHeader";let l=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",r.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},4678:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(5444),r=t(9300),n=t(5522);let i=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},4635:function(e,a,t){"use strict";t.d(a,{_:function(){return d}});var s=t(5444),r=t(9300),n=t(4100),i=t(2371),o=t(5522);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),e),...a}));d.displayName=n.f.displayName},5854:function(e,a,t){"use strict";t.d(a,{pm:function(){return f}});var s=t(9300);let r=0,n=new Map,i=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},o=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u({...e}){let a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,a]=s.useState(d);return s.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5522:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var s=t(2191),r=t(3607);function n(...e){return(0,r.m6)((0,s.W)(e))}},4559:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},8082:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5798:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},8510:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8382:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4693:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4100:function(e,a,t){"use strict";t.d(a,{f:function(){return o}});var s=t(9300),r=t(7234),n=t(5444),i=s.forwardRef((e,a)=>(0,n.jsx)(r.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var o=i},7234:function(e,a,t){"use strict";t.d(a,{WV:function(){return o},jH:function(){return l}});var s=t(9300),r=t(8691),n=t(223),i=t(5444),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let t=s.forwardRef((e,t)=>{let{asChild:s,...r}=e,o=s?n.g7:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...r,ref:t})});return t.displayName=`Primitive.${a}`,{...e,[a]:t}},{});function l(e,a){e&&r.flushSync(()=>e.dispatchEvent(a))}}},function(e){e.O(0,[770,252,527,386,156,744],function(){return e(e.s=7791)}),_N_E=e.O()}]);